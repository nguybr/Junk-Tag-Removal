<!DOCTYPE html>
<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" lang = "en-US">

<head>
<meta charset="UTF-8">
<title>Intern Junk Code Cleaning</title>
<link rel ="stylesheet" type="text/css" href="myStyle.css">
<script>


	<!-- Returns a collection -->
	function getCollection(formId, cond) {
		var formElements = document.getElementById('form').elements;
		var formParts = [];
		if (cond) { 			<!-- If true, means to get element names -->
			var i;
			for (i = 0; i < formElements.length; i++) {
			formParts[i] = formElements[i].value;
			}
		}
		else {				<!-- If false, means to get whether each element is checked or not. -->
			var i;
			for (i = 0; i < formElements.length; i++) {
			formParts[i] = formElements[i].checked;
			}
		}
		return formParts;
	}

	<!-- Checks all boxes -->
	function checkMark() {
		var elements = document.getElementById('form').elements;
		var i;
		var bool = true;
		if (elements[0].checked) {
			bool = false;
		}

		for (i = 0; i < elements.length; i++) {
			elements[i].checked = bool;
		}
	}


	<!-- This function cleans a user-inputted attribute -->
	function cleanAttribute(attributeName, stringToClean) {
		var newString = stringToClean;
		while (newString.indexOf(attributeName) > -1) {
			var indexStyle = newString.indexOf(attributeName);
			var indexQuote = (attributeName.length + 1) + indexStyle + newString.substring(indexStyle + 8).indexOf('"');
			var unwantedString = newString.substring(indexStyle, indexQuote + 1);
			newString = newString.replace(unwantedString, '');
		}
			return newString
	}

	<!-- This function cleans a user-inputted tag -->
	function cleanTag(tagName, replacement, stringToClean) {
		var newString = stringToClean;
		while (newString.indexOf(tagName) > -1) {
			var indexStyle = newString.indexOf(tagName);
			var indexGreater = indexStyle + newString.substring(indexStyle).indexOf('>');
			var unwantedString = newString.substring(indexStyle, indexGreater + 1);
			newString = newString.replace(unwantedString, replacement);

			var endTag = tagName.charAt(0) + '/' + tagName.substring(1);
			if (tagName.charAt(tagName.length-1) !== '>') {
				endTag = endTag + '>';
			}
			var replaceEnd = '';
			if (replacement.length > 0) {
				replaceEnd = replacement.charAt(0) + '/' + replacement.substring(1);
			}
			var deletedRegex = new RegExp(endTag, 'g');
			newString = newString.replace(deletedRegex, replaceEnd);
		}
		return newString;

		
	}

	<!-- Cleans selected attributes -->
	function attriClean(code, listTags, listChecked) {
		var result = code;
		var i;
		for (i = 0; i < 2; i++) {
			if (listChecked[i]) {
				result = cleanAttribute(listTags[i], result);
			}
		}
		return result;
	}

	<!-- Removes and replaces tags (FOR THE FUTURE THIS SHOULD BE SCALABLE TO ANY TAGS)-->
	function executeCleanTags(code, listTags, listChecked) {
		var result = code;
		if (listChecked[2]) {
			result = cleanTag(listTags[2], '', result);
		}
		if (listChecked[4]) {
			result = cleanTag(listTags[4], '<strong>', result);
		}
		if (listChecked[5]) {
			result = cleanTag(listTags[5], '<em>', result);
		}
		return result;
	}



	<!-- Cleans script tags -->
	function cleanScript(sourceCode, listChecked) {
		var newCode = sourceCode;
		if (listChecked[3]) {
			while (newCode.indexOf('<script') > -1)
			{
				var indexStyle = newCode.indexOf('<script');
				var indexQuote = indexStyle + newCode.substring(indexStyle).indexOf('</scri');
				var unwantedString = newCode.substring(indexStyle, indexQuote + 9);
				newCode = newCode.replace(unwantedString, '');
			}
		}
		return newCode;
	}
	

	<!-- On click, this runs all the cleaning -->
	function clean() {
		<!-- Get all text inside the input textbox -->
		var sourceCode = document.getElementById("bigString").value;
		var newCode = sourceCode;
		
		<!-- Get a list of element names and whether they should be removed -->
		var elementNames = getCollection('form', true);
		var elementsChecked = getCollection('form', false);

		newCode = attriClean(newCode, elementNames, elementsChecked);
		newCode = executeCleanTags(newCode, elementNames, elementsChecked);
		newCode = cleanScript(newCode, elementsChecked);
		
		<!-- Return cleaned code -->
		document.getElementById("demo").innerHTML = newCode;
	}



</script>

<script>
	function copyText() {
	var copiedText = document.getElementById("demo");
	copiedText.select();
	document.execCommand("copy");
	alert("Text has been copied to clipboard!");
}
</script>


<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:IsMyDocuments msdt:dt="string">1</mso:IsMyDocuments>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<div class="grid">
    <div class="grid-item-hd">
	<h1> Junk Tag Removal</h1>
    </div>
    <div class="grid-item-in">
	<div name="input">
		<h3>Enter text of your HTML code here:</h3>
		<textarea cols="100" rows="10" id="bigString"></textarea>
		<br>
        </div>
    </div>
    <div class="grid-item-out">
	<h3><b>Output:</b></h3>
	<textarea id="demo" rows = "10" cols="100"></textarea>
	<br>
	<button class="button" onclick="copyText()">Copy to Clipboard</button>
    </div>
    <div class="grid-item-txt">
	<h3>Preprogrammed Tag List</h3>
	<p> 
	<form id='form'>
	Which HTML elements should be removed: <br><br>
		<strong><u> Attributes </u></strong> <br>
		<input type='checkbox' name='class' id = 'class' value=' class='> class=" "<br>
		<input type='checkbox' name='style' id = 'style' value=' style='> style=" "<br><br>
		<strong><u> Tags </u></strong> <br>
		<input type='checkbox' name='span' id='span' value='<span'> &ltspan&gt<br>
		<input type='checkbox' name='script' id='script' value='<script'> &ltscript&gt<br><br>
		<strong><u> Replace </u></strong> <br>
		<input type='checkbox' name='bold' id = 'bold' value='<b'> &ltb&gt with &ltstrong&gt<br>
		<input type='checkbox' name='italics' id = 'italics' value='<i'> &lti&gt with &ltem&gt<br>
	</form> <br>
	<span class="checkmark">
    		<div class="checkmark_stem"></div>
    		<div class="checkmark_kick"></div>
	</span>
	<button class="button" onclick='checkMark()'>Check All</button>
	<button class="button" onclick='clean()'>Clean Code</button> 
	<img class="image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iNDgiIGhlaWdodD0iNDgiCnZpZXdCb3g9IjAgMCAxNzIgMTcyIgpzdHlsZT0iIGZpbGw6IzAwMDAwMDsiPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIGZvbnQtZmFtaWx5PSJub25lIiBmb250LXdlaWdodD0ibm9uZSIgZm9udC1zaXplPSJub25lIiB0ZXh0LWFuY2hvcj0ibm9uZSIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0wLDE3MnYtMTcyaDE3MnYxNzJ6IiBmaWxsPSJub25lIj48L3BhdGg+PGc+PHBhdGggZD0iTTE1MC41LDE1MC41aC04OS41MjI0MmwtMC4wNjA5MiwtNy4xNjY2N2g4OS41ODMzM3oiIGZpbGw9IiNiZTkwYWYiPjwvcGF0aD48cGF0aCBkPSJNMTEwLjE4MzkyLDExNy4zNTA1OGw0My4wNzUyNSwtNDMuMDcxNjdjMi43OTg1OCwtMi43OTg1OCAyLjc5ODU4LC03LjMzODY3IDAsLTEwLjEzNzI1bC00MC41NDE4MywtNDAuNTQxODNjLTIuNzk4NTgsLTIuNzk4NTggLTcuMzM4NjcsLTIuNzk4NTggLTEwLjEzNzI1LDBsLTQzLjA3NTI1LDQzLjA3MTY3eiIgZmlsbD0iIzVmNDg1NyI+PC9wYXRoPjxwYXRoIGQ9Ik0xNDIuMzU4NjcsODUuMTc5NDJsMTAuOTAwNSwtMTAuOTAwNWMyLjc5ODU4LC0yLjc5ODU4IDIuNzk4NTgsLTcuMzM4NjcgMCwtMTAuMTM3MjVsLTQwLjU0MTgzLC00MC41NDE4M2MtMi43OTg1OCwtMi43OTg1OCAtNy4zMzg2NywtMi43OTg1OCAtMTAuMTM3MjUsMGwtMTAuOTA0MDgsMTAuOTAwNXoiIGZpbGw9IiM1ZjQ4NTciPjwvcGF0aD48cGF0aCBkPSJNNzYuNTY1MDgsMTUwLjVsMzMuNjE4ODMsLTMzLjE0OTQybC01MC42NzkwOCwtNTAuNjc5MDhsLTQzLjA3MTY3LDQzLjA3ODgzYy0yLjc5ODU4LDIuNzk1IC0yLjc5ODU4LDcuMzM1MDggMCwxMC4xMzM2N2wzMC4xNTAxNywzMC42MTZ6IiBmaWxsPSIjYmU5MGFmIj48L3BhdGg+PC9nPjwvZz48L3N2Zz4=">
	<br><br>
	Comments are removed. <br>
	</p>
    </div>
    <div class="grid-item-ft">
	<p style="font-size: 10px"> This program has been created by the 2019 Summer Intern Cohort </p>
    </div>
</div>



</html>

<!-- <script>adffa</script><span><h2 class="dog" style="dog"><b><i>code is clean!</i></b></h2></span> -->
